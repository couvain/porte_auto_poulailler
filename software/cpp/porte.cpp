#include "porte.h"
#include "moteur.h"
#include "log.h"

#include <iostream>

//*****************************************************************************
//
// 
//
//-----------------------------------------------------------------------------
CPorte::CPorte(int p_gpio_inv_A, int p_gpio_inv_B, int p_gpio_comm)
{
	m_moteur = new CMoteur(p_gpio_inv_A, p_gpio_inv_B, p_gpio_comm);
}

//*****************************************************************************
//
// 
//
//-----------------------------------------------------------------------------
CPorte::~CPorte()
{
	delete(m_moteur);
}

//*****************************************************************************
//
// 
//
//-----------------------------------------------------------------------------
void CPorte::initialiser()
{
	m_moteur->initialiser();
}

//*****************************************************************************
//
// 
//
//-----------------------------------------------------------------------------
void CPorte::ouvrir()
{
	LOG(INFO) << "Ouverture de la porte";
	m_moteur->cabler_en_marche_avant();
	m_moteur->demarrer();
}

//*****************************************************************************
//
// 
//
//-----------------------------------------------------------------------------
void CPorte::fermer()
{
	LOG(INFO) << "Fermeture de la porte";
	m_moteur->cabler_en_marche_arriere();
	m_moteur->demarrer();
}

//*****************************************************************************
//
// 
//
//-----------------------------------------------------------------------------
void CPorte::stopper()
{
	LOG(INFO) << "Immobilisation de la porte";
	m_moteur->stopper();
}

